<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pe="http://primefaces.org/ui/extensions"
	template="/public/templates/template.xhtml">
	
	
	<!-- 
		Author: Juarez Monteiro
		Version 20/06/2015
	 -->
	 
	
	<ui:define name="metadata" />
	<ui:define name="content">
		<h1 class="lead">Localizar Hospitais</h1>
		
		
		<p:accordionPanel multiple="true">
			<p:tab title="Lista de Hospitais">
				<h:panelGroup layout="block" styleClass="form-group">
					<h:panelGrid columns="2" styleClass="mtable">
							<p:outputLabel for="hospitais" value="Hospitais" />
							<br/><br/>
							<p:selectOneMenu id="hospitais"
								value="#{manterHospitalMB.hospital}" 
								style="width:70%"
								required="true" requiredMessage="Um Hospital deve ser escolhido." >
								<p:ajax listener="#{manterHospitalMB.onSelectHospital}" />
								<f:selectItem itemLabel="Selecione..." itemValue=""
									noSelectionOption="true" />
								<f:selectItems
									value="#{manterHospitalMB.listaHospital}"
									var="hospital" itemLabel="#{hospital.nome}"
									itemValue="#{hospital}" />
							</p:selectOneMenu>
						
					
					<h:panelGroup layout="block" styleClass="form-group">
						<p:commandButton value="Buscar" type="submit" action="#{manterHospitalMB.atualizaMapa}" ajax="true"
							immediate="false" update="mapa" icon="ui-icon-search"/>
					</h:panelGroup>
					</h:panelGrid>
				
				<h:panelGroup layout="block" styleClass="form-group">
				<f:view contentType="text/html">
	        		<h2 style="text-align:center;">Porto Alegre - RS</h2>
	        		<p:gmap id="mapa" center="#{manterHospitalMB.centroLat},#{manterHospitalMB.centroLng}" zoom="13" type="MAP" model="#{manterHospitalMB.local}" style="width:100%;height:200px" />
	    		</f:view>
	    		</h:panelGroup>
	    		</h:panelGroup>
    		
			</p:tab> 
		</p:accordionPanel>
	</ui:define>
</ui:composition>